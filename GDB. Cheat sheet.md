https://www.opennet.ru/docs/RUS/gdb/
# Стандартные команды отладки
1. Запустить gdb с указанием файла программы. Программа должна быть собрана с отладочной информацией.
```gdb
  gdb <app name>
  или
  gdb --args <app name> <args for app>
```
2. Запустить gdb и подключиться к работающему процессу
```gdb
  gdb -p <PID>
```
3. Часто используемые команды gdb
```gdb
  (gdb) info threads			# получить информацию о потоках
  (gdb) info shared				#
  (gdb) info locals				# получить информацию об автоматических переменных
  (gdb) info files				#
  (gdb) info variables			#  (gdb) core <core file>		# загрузить файл дампа
  (gdb) thread <N>				# перейти к потоку N. Номер потока взять из info threads(gdb) backtrace <N>			# получить стек вызовов. Если не указывать N, то ...
  (gdb) frame <N>				# перейти к фрейму функции N. Номер фрейма можно получить из вывода backtrace

	# https://visualgdb.com/gdbreference/commands/print
  (gdb) print <var>				# получить значение переменной var, умеет печатать структуры целиком
  (gdb) print /x <var>			# получить значение переменной var в шестнадцатиричном представлении
  (gdb) print *ptr				# получить значение переменной, на которую указывает указатель ptr
  (gdb) print *array@len		# получить значение len элементов массива array
  (gdb) x /length ptr			# получить дамп памяти по void *ptr; https://visualgdb.com/gdbreference/commands/x
  
  (gdb) help <cmd>				# справка по команде cmd, например, help info
```
# [Как посмотреть причину генерации core файла в gdb](https://www.opennet.ru/tips/940_gdb_debug_core.shtml)

***программа** - файл рухнувшей программы, собранной с включением отладочной информации
**core** - файл с core dump*

1. Запускаем gdb:
```bash
$ gdb
```
Указываем файл рухнувшей программы, собранной с включением отладочной информации
```gdb
  (gdb) программа
```
или
```bash
$ gdb программа
```

2. Указываем файл с core dump, будет показана причина и строка на которой приложение рухнуло
```gdb
  (gdb) core core  
```

3. Смотрим состояние стека вызовов до падения
```gdb
  (gdb) backtrace 1
```
  или
```gdb
  (gdb) backtrace 2
```
  или
```gdb
  (gdb) backtrace
```
На этом шаге, обычно, стоит выбирать фрейм последней **своей** работавшей функции и начинать изучение состояния с нее. Потом, возможно, передвинув изучаемый фрейм на другую функцию.

4. Указываем номер фрейма из стека вызовов полученного на предыдущем шаге, который будем смотреть подробнее (показан как ***N***)
```gdb
  (gdb) frame N
```

5. Смотрим состояние переменных (в примере - ***result***)
```gdb
  (gdb) info locals
  (gdb) print result
  (gdb) whatis result
```

6. Полезно также посомотреть на выполнении какого системного вызова происходит сбой используя программы: strace (http://strace.sourceforge.net), ltrace (для Linux) или ktrace и truss (входят в состав FreeBSD).
